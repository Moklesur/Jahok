<?phpnamespace Elementor;if ( ! defined( 'ABSPATH' ) ) {    exit; // Exit if accessed directly.}/** * Blog block * * @since 1.0.0 */class jahok_Category_Post extends Widget_Base {    /**     * Get widget name.     *     * Retrieve oEmbed widget name.     *     * @since 1.0.0     * @access public     *     * @return string Widget name.     */    public function get_name() {        return 'Category Post';    }    /**     * Get widget title.     *     * Retrieve oEmbed widget title.     *     * @since 1.0.0     * @access public     *     * @return string Widget title.     */    public function get_title() {        return __( 'Category Post', 'jahok' );    }    /**     * Get widget icon.     *     * Retrieve oEmbed widget icon.     *     * @since 1.0.0     * @access public     *     * @return string Widget icon.     */    public function get_icon() {        return 'fa fa-cog';    }    /**     * Get widget categories.     *     * Retrieve the list of categories the oEmbed widget belongs to.     *     * @since 1.0.0     * @access public     *     * @return array Widget categories.     */    public function get_categories() {        return [ 'Jahok' ];    }    /**     * Register oEmbed widget controls.     *     * Adds different input fields to allow the user to change and customize the widget settings.     *     * @since 1.0.0     * @access protected     */    protected function _register_controls() {        $this->start_controls_section(            'category_post_section',            [                'label' => __( 'Setting', 'jahok' ),                'tab' => \Elementor\Controls_Manager::TAB_CONTENT,            ]        );        $category_slider_array = $this->prepare_cats_for_select();        $this->add_control(            'title',            [                'label' => __( 'Title', 'jahok' ),                'type' => \Elementor\Controls_Manager::TEXT,                'default' => __( 'Title', 'jahok' ),                'placeholder' => __( 'Title', 'jahok' ),            ]        );        $this->add_control(            'categories',            [                'label' => __( 'Select your categories', 'jahok' ),                'type' => Controls_Manager::SELECT2,                'dynamic' => [                    'active' => true,                ],                'options' => $category_slider_array,                'multiple' => false            ]        );        $this->add_control(            'limit',            [                'label' => __( 'Post Limit', 'jahok' ),                'type' => \Elementor\Controls_Manager::NUMBER,                'min' => 1,                'max' => 25,                'step' => 1,                'default' => 6,            ]        );        $this->end_controls_section();    }    /**     * Render oEmbed widget output on the frontend.     *     * Written in PHP and used to generate the final HTML.     *     * @since 1.0.0     * @access protected     */    protected function render() {        $settings = $this->get_settings_for_display();        $category_slider = is_array( $settings['categories'] ) ? implode( ',', $settings['categories'] ) : $settings['categories'];        $query = new \WP_Query( array(            'posts_per_page'      => $settings['limit'],            'no_found_rows'       => true,            'post_stairis'         => 'publish',            'ignore_sticky_posts' => true,            'cat' 			      => $category_slider        ) );        ?>        <div class="pm-category-post container">            <?php            if ( $query->have_posts() ) :                while ( $query->have_posts() ) : $query->the_post();                    $col_9 = ' col-lg-9 col-12';                    if ( ! has_post_thumbnail() ) :                        $col_9 = ' col-lg-12 col-12';                    endif;            ?>                    <div class="post-item boxes row mb-30 post-grid">                        <?php if ( has_post_thumbnail() ) :                            jahok_post_thumbnail();                        endif; ?>                        <div class="post-content<?php echo esc_attr( $col_9 ); ?>">                            <h2 class="post-title">                                <a href="<?php echo esc_url( get_the_permalink() ); ?>">                                    <?php echo esc_html( get_the_title() ); ?>                                </a>                            </h2>                            <p class="post-excerpt m-0">                                <?php echo esc_html( get_the_excerpt() ); ?>                            </p>                            <div class="visit-website entry-footer">                                <a href="<?php echo esc_url( get_the_permalink() ); ?>">                                    <?php esc_html_e( 'visit website', 'jahok' ); ?>                                </a>                            </div>                        </div>                    </div>                <?php                endwhile;                wp_reset_postdata();            endif;            ?>        </div>        <?php    }    /**     * Prepare posts to be used in the SELECT2 field     */    private function prepare_cats_for_select() {        $categories = get_categories();        $options = ['' => ''];        foreach ( $categories as $cat ) {            $options[$cat->term_id] = $cat->name;        }        return $options;    }}Plugin::instance()->widgets_manager->register_widget_type( new jahok_Category_Post() );